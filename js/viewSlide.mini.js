(function(w){function ViewSlide(ele,obj){if(ele.nodeType==1){this.slide=ele}else{this.slide=document.querySelector(ele)||document.querySelector(".viewSlide")}this.slideList=this.slide.querySelectorAll(".view-slide");this.viewContainer=this.slide.querySelector(".view-container");this.viewPointer=this.slide.querySelector(".view-pagination");this.pointerList=null;this.arrowRight=this.slide.querySelector(".arrowRight");this.arrowLeft=this.slide.querySelector(".arrowLeft");this.arrowBox=this.slide.querySelector(".arrow");this.direction=obj.direction||"left";this.loop=obj.loop||false;this.pagination=obj.pagination||false;this.arrow=obj.arrow||false;this.autoPlay=obj.autoPlay||false;this.time=obj.speed||50;this.tranWidth=this.slide.offsetWidth;this.index=0;this.flag=true;this.autoPlayTime=obj.autoPlayTime||3000;this.length=0;this.init()}ViewSlide.prototype.init=function(){var that=this;this.setStyle();if(this.pagination){this.setPointer(this.length)}this.arrowRight.onclick=function(){that.doRight();if(that.index==that.length){that.pointerColor(0)}else{that.pointerColor(that.index)}};this.arrowLeft.onclick=function(){that.doLeft();if(that.index==that.length){that.pointerColor(this.length)}else{that.pointerColor(that.index)}};if(this.autoPlay){this.doAutoPlay(this.autoPlayTime)}if(!this.arrow){this.hiddenArrow()}};ViewSlide.prototype.setStyle=function(){this.length=this.slideList.length;for(var i=0;i<this.length;i++){this.slideList[i].style.width=this.tranWidth+"px"}if(this.loop){var newLi=this.slideList[0].cloneNode(true);this.viewContainer.appendChild(newLi);this.viewContainer.style.width=this.tranWidth*(this.length+1)+"px"}else{this.viewContainer.style.width=this.tranWidth*this.length+"px"}};ViewSlide.prototype.setPointer=function(length){var that=this;var ul=document.createElement("ul");this.viewPointer.appendChild(ul);for(var i=0;i<length;i++){var li=document.createElement("li");li.setAttribute("liIndex",i);if(i==0){li.classList.add("active")}ul.appendChild(li);li.onclick=function(){that.index=this.getAttribute("liIndex");that.target=-that.tranWidth*that.index;that.pointerClick(that.target,that.time)}}this.pointerList=this.viewPointer.querySelector("ul").querySelectorAll("li")};ViewSlide.prototype.animate=function(target,time){this.flag=false;var that=this;var step=(target-that.viewContainer.offsetLeft)/time;that.viewContainer.timeId=setInterval(function(){var left=that.viewContainer.offsetLeft;if(Math.abs((that.viewContainer.offsetLeft-target))>Math.abs(step)){left+=step;that.viewContainer.style.left=left+"px"}else{that.viewContainer.style.left=target+"px";clearInterval(that.viewContainer.timeId);that.flag=true}},1)};ViewSlide.prototype.doRight=function(){if(this.flag){if(this.loop){if(this.index==this.length){this.index=0;this.viewContainer.style.left=0}this.index++;this.target=-this.tranWidth*this.index;this.animate(this.target,this.time)}else{if(this.index==this.length-1){this.index==this.length-1}else{this.index++}this.target=-this.tranWidth*this.index;this.animate(this.target,this.time)}}};ViewSlide.prototype.doLeft=function(){if(this.flag){if(this.loop){if(this.index==0){this.index=this.length;this.viewContainer.style.left=-this.tranWidth*this.index}this.index--;this.target=-this.tranWidth*this.index;this.animate(this.target,this.time)}else{if(this.index>0){this.index--;this.target=-this.tranWidth*this.index;this.animate(this.target,this.time)}}}};ViewSlide.prototype.pointerClick=function(target,time){if(this.flag){this.animate(target,time);this.pointerColor(this.index)}};ViewSlide.prototype.doAutoPlay=function(autoplayTime){var that=this;setInterval(function(){that.arrowRight.onclick()},autoplayTime)};ViewSlide.prototype.pointerColor=function(index){if(this.pagination){for(var i=0;i<this.pointerList.length;i++){this.pointerList[i].classList.remove("active")}this.pointerList[index].classList.add("active")}};ViewSlide.prototype.hiddenArrow=function(){this.arrowBox.style="visibility:hidden"};w.ViewSlide=ViewSlide;w.$view=function(obj){var viewSilde=new ViewSlide(".viewSilde",obj);return viewSilde}})(window);